{% extends "layout.html" %}

{% block title %}
Reference app
{% endblock %}

{% block body %}
</br>

<!-- Sort by form -->
<form action="/" method="POST">
  <div class="mb-3 row"
    <label for="sort_by" class="form-label col-sm-2">Sort by</label>
    <div class="col-sm-10">
      <select id="sort_by" name="sort_by" onchange="this.form.submit()" class="form-select" aria-label="Sort by">
        <option value="title">Title</option>
        <option value="author">Author</option>
        <option value="year">Year</option>
      </select>
    </div>
  </div>
</form>

<h2>Saved references:</h2></br>

<!-- Flash message for validation success -->

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div>
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}


{% if message_references %}
    <p>{{ message_references }}</p>
{% endif %}

{% for reference in references %}
  {% with reference=reference, loop_index=loop.index0 %}
    {% include "reference_card.html" %}
  {% endwith %}
{% endfor %}

{% endblock %}
