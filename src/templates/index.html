{% extends "layout.html" %}

{% block title %}
Reference app
{% endblock %}

{% block body %}
</br>

<div class="container text-left">
  <div class="row">
    <div class="col-sm-8"><h2>Saved references:</h2></div>
    <div class="col-sm-2">
      <!-- Sort by form -->
      <form method="GET" class="d-flex align-items-center">
        <label for="sort_by" class="me-2"><b>Sort by</b></label>
          <select id="sort_by" name="sort_by" onchange="this.form.submit()" class="form-select w-auto" aria-label="Sort by">
            <option value="title" {% if selected_value == "title" %}selected{% endif %}>Title</option>
            <option value="author" {% if selected_value == "author" %}selected{% endif %}>Author</option>
            <option value="year" {% if selected_value == "year" %}selected{% endif %}>Year</option>
          </select>
      </form>
    </div>
  </div>

</div>

<!-- Flash message for validation success -->

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div>
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible">
          {{ message }}
          <button type="button" class="text-end btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}


{% if message_references %}
    <p>{{ message_references }}</p>
{% endif %}

{% for reference in references %}
  {% with reference=reference, loop_index=loop.index0 %}
    {% include "reference_card.html" %}
  {% endwith %}
{% endfor %}

{% endblock %}
